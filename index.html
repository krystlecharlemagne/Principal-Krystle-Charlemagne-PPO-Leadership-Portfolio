<!-- Math Comparative Performance Page (FIXED) -->
<div id="math-comparative" class="page">
  <div class="container">
    <h1 style="text-align:center;font-size:3rem;margin-bottom:3rem;background:linear-gradient(45deg,#4ecdc4,#6bcf7f);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">
      2025 Math Performance Comparison
    </h1>

    <div style="text-align:center;margin-bottom:3rem;">
      <p style="font-size:1.3rem;color:white;">P.S. 66 Math Performance vs. City, Borough, and District Benchmarks</p>
    </div>

    <!-- Overall Math Comparison Cards -->
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:2rem;margin:3rem 0;">
      <div style="background:linear-gradient(135deg,#ff6b6b,#ff8a80);border-radius:20px;padding:2rem;text-align:center;border:3px solid #ff6b6b;">
        <h3 style="color:white;margin-bottom:1rem;">🌎 NYC Overall</h3>
        <div style="font-size:3rem;font-weight:bold;color:white;margin-bottom:.5rem;">56.9%</div>
        <p style="color:white;font-size:1.1rem;">All Grades Proficiency</p>
      </div>
      <div style="background:linear-gradient(135deg,#ffd93d,#ffb347);border-radius:20px;padding:2rem;text-align:center;border:3px solid #ffd93d;">
        <h3 style="color:#333;margin-bottom:1rem;">🏙️ Brooklyn</h3>
        <div style="font-size:3rem;font-weight:bold;color:#333;margin-bottom:.5rem;">61.4%</div>
        <p style="color:#333;font-size:1.1rem;">All Grades Proficiency</p>
      </div>
      <div style="background:linear-gradient(135deg,#4ecdc4,#6bcf7f);border-radius:20px;padding:2rem;text-align:center;border:3px solid #4ecdc4;">
        <h3 style="color:white;margin-bottom:1rem;">📍 District 18</h3>
        <div style="font-size:3rem;font-weight:bold;color:white;margin-bottom:.5rem;">59.0%</div>
        <p style="color:white;font-size:1.1rem;">All Grades Proficiency</p>
      </div>
      <div style="background:linear-gradient(135deg,#6bcf7f,#4ecdc4);border-radius:20px;padding:2rem;text-align:center;border:4px solid #6bcf7f;box-shadow:0 0 20px rgba(108,207,127,.5);">
        <h3 style="color:white;margin-bottom:1rem;">🏫 P.S. 66</h3>
        <div style="font-size:3.5rem;font-weight:bold;color:white;margin-bottom:.5rem;">60.3%</div>
        <p style="color:white;font-size:1.2rem;font-weight:bold;">All Grades Proficiency 🌟</p>
      </div>
    </div>

    <!-- Math Performance Analysis -->
    <div style="background:rgba(255,255,255,.1);border-radius:20px;padding:3rem;margin:3rem 0;text-align:center;">
      <h2 style="color:white;margin-bottom:2rem;">📊 Math Performance Position Analysis</h2>
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:2rem;">
        <div style="background:rgba(108,207,127,.3);padding:2rem;border-radius:15px;border:2px solid #6bcf7f;">
          <h4 style="color:#6bcf7f;">vs. NYC Overall</h4>
          <p style="color:white;font-size:1.3rem;margin:1rem 0;"><strong>+3.4 percentage points</strong></p>
          <p style="color:white;">⭐ EXCEEDS citywide average</p>
        </div>
        <div style="background:rgba(255,217,61,.2);padding:2rem;border-radius:15px;">
          <h4 style="color:#ffd93d;">vs. Brooklyn</h4>
          <p style="color:white;font-size:1.3rem;margin:1rem 0;"><strong>-1.1 percentage points</strong></p>
          <p style="color:white;">Competitive with borough average</p>
        </div>
        <div style="background:rgba(108,207,127,.3);padding:2rem;border-radius:15px;border:2px solid #6bcf7f;">
          <h4 style="color:#4ecdc4;">vs. District 18</h4>
          <p style="color:white;font-size:1.3rem;margin:1rem 0;"><strong>+1.3 percentage points</strong></p>
          <p style="color:white;">⭐ EXCEEDS district average</p>
        </div>
      </div>
    </div>

    <!-- Grade-by-Grade Math Detailed Comparison -->
    <div style="background:rgba(255,255,255,.1);border-radius:20px;padding:2rem;margin:3rem 0;">
      <h2 style="color:white;text-align:center;margin-bottom:2rem;">📈 Grade-by-Grade Math Performance Comparison</h2>

      <!-- Grade 3 Math -->
      <div style="background:rgba(255,255,255,.1);border-radius:15px;padding:1.5rem;margin:1.5rem 0;">
        <h3 style="color:#4ecdc4;margin-bottom:1rem;">🔢 Grade 3 Math Proficiency</h3>
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:1rem;">
          <div style="text-align:center;background:rgba(255,255,255,.1);padding:1rem;border-radius:10px;">
            <strong style="color:#ff6b6b;">NYC:</strong><br><span style="color:white;font-size:1.2rem;">63.6%</span>
          </div>
          <div style="text-align:center;background:rgba(255,255,255,.1);padding:1rem;border-radius:10px;">
            <strong style="color:#ffd93d;">Brooklyn:</strong><br><span style="color:white;font-size:1.2rem;">(enter)</span>
          </div>
          <div style="text-align:center;background:rgba(255,255,255,.1);padding:1rem;border-radius:10px;">
            <strong style="color:#4ecdc4;">District 18:</strong><br><span style="color:white;font-size:1.2rem;">(enter)</span>
          </div>
          <div style="text-align:center;background:rgba(108,207,127,.3);padding:1rem;border-radius:10px;border:2px solid #6bcf7f;">
            <strong style="color:#6bcf7f;">P.S. 66:</strong><br><span style="color:white;font-size:1.4rem;font-weight:bold;">(enter)</span>
          </div>
        </div>
      </div>

      <!-- TODO: Repeat this block for Grades 4–8 as needed -->
    </div>
  </div>
</div>

<script>
  // Safer page switcher (no reliance on global 'event')
  function showPage(pageId, evt) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    const target = document.getElementById(pageId);
    if (target) target.classList.add('active');

    document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));
    if (evt && evt.currentTarget) evt.currentTarget.classList.add('active');

    const navLinks = document.getElementById('navLinks');
    if (navLinks) navLinks.classList.remove('active');

    if (pageId === 'journey') {
      setTimeout(() => {
        document.querySelectorAll('.timeline-item').forEach((item, i) => {
          setTimeout(() => item.classList.add('visible'), i * 200);
        });
      }, 100);
    }
  }
</script>
